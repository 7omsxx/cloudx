server:
  port: 80

spring:
  application:
    name: cloudx-gateway
  profiles:
    active: dev

  cloud:
    nacos:
      server-addr: nacos.chachae.cn:8848
#      config:
#        server-addr: ${spring.cloud.nacos.server-addr}
#        group: DEV_GROUP
#        prefix: ${spring.application.name}
#        file-extension: yaml

    gateway:
      globalcors:
        corsConfigurations:
          '[/**]':
            allowedOrigins: "*"
            allowedMethods: "*"
            allowedHeaders: "*"
            allowCredentials: true
      routes:
        - id: cloudx-auth
          uri: lb://cloudx-auth
          predicates:
            - Path=/auth/**
#          filters:
#            - name: Hystrix
#              args:
#                name: authfallback
#                fallbackUri: forward:/fallback/cloudx-auth
      loadbalancer:
        use404: true
      default-filters:
        - StripPrefix=1

  autoconfigure:
    exclude: org.springframework.boot.autoconfigure.data.redis.RedisAutoConfiguration

ribbon:
  eager-load:
    enabled: true

management:
  endpoint:
    health:
      show-details: ALWAYS
  endpoints:
    web:
      exposure:
        include: health,info,gateway

logging:
  level:
    com:
      alibaba:
        cloud:
          nacos:
            client:
              NacosPropertySourceBuilder: error